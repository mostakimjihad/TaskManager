{% load static %}
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Dashboard</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/css/multi-select-tag.css">
      <link rel="stylesheet" href="{% static 'css/style.css' %}">
   </head>
   <body>
      <nav class="navbar navbar-expand-lg navbar-light p-3" style="background-color:#FDE4EA;">
         <a class="navbar-brand" href="{% url 'dashboard' %}">Dashboard</a>
         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
         <span class="navbar-toggler-icon"></span>
         </button>
         <span class="navbar-text">
         Hi, {{employee.username}} ( {{employee.roll}} )
         </span>
         <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
               {% if employee.roll == "admin" %}
               <li class="nav-item active">
                  <a class="nav-link" href="{% url 'create_project' %}">Create Project</a>
               </li>
               <li class="nav-item active">
                  <a class="nav-link" href="{% url 'create_employee' %}">Create Employee</a>
               </li>
               {% endif %}
               <li class="nav-item active">
                  <a class="nav-link fw-bold" href="{% url 'logout' %}">
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z"/>
                        <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"/>
                     </svg>
                     Logout
                  </a>
               </li>
            </ul>
         </div>
      </nav>
      <!-- contain -->
      <div class="container p-5">
         <div class="row align-items-start">
            {% if employee.roll == 'admin' %}
               <div class="col-lg-6 shadow p-3">
            {% else %}
               <div class="col-lg-12 shadow p-3">
            {% endif %}
               <h2 class="text-center p-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
                     <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"/>
                     <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"/>
                     <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"/>
                  </svg>
                  Project List
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
                     <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"/>
                     <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"/>
                     <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"/>
                  </svg>
               </h2>
               <hr>
                  <div class="p-2 d-flex flex-wrap">
                  {% if employee.roll == "admin" %}
                     {% for project in projects %}
                        <div class="card mb-3" style="width: calc(50% - 20px); margin: 10px;">
                           <div class="card-body">
                              <h5 class="card-title text-center">{{ project.project_name }}</h5>
                           </div>
                           <ul class="list-group list-group-flush">
                              <li class="list-group-item"><span class="fw-bold">Status : </span>{{ project.status }}</li>
                              <li class="list-group-item"><span class="fw-bold">Due date : </span>{{ project.due_date }}</li>
                              <li class="list-group-item"><span class="fw-bold">Last Update : </span>
                                 {% for key, value in last_updates.items %}
                                    {% if key == project.id %}
                                       {{ value }}
                                    {% endif %}
                                 {% endfor %}
                              </li>
                           </ul>
                           <div class="card-body">
                              <a href="{% url 'details' project.id %}" class="card-link">Details</a>
                           </div>
                        </div>
                     {% endfor %}
                  {% else %}
                     {% for assigned_project in assigned_projects %}
                        <div class="card mb-3" style="width: calc(25% - 20px); margin: 10px;">
                           <div class="card-body">
                              <h5 class="card-title text-center">{{ assigned_project.project_name }}</h5>
                           </div>
                           <ul class="list-group list-group-flush">
                              <li class="list-group-item"><span class="fw-bold">Status : </span>{{ assigned_project.status }}</li>
                              <li class="list-group-item"><span class="fw-bold">Due date : </span>{{ assigned_project.due_date }}</li>
                              <li class="list-group-item"><span class="fw-bold">Last Update : </span>
                                 {% for key, value in last_updates.items %}
                                    {% if key == assigned_project.id %}
                                       {{ value }}
                                    {% endif %}
                                 {% endfor %}
                              </li>
                           </ul>
                           <div class="card-body">
                              <a href="{% url 'details' assigned_project.id %}" class="card-link">Details</a>
                           </div>
                        </div>
                     {% endfor %}
                  {% endif %}
               </div>
            </div>
            {% if employee.roll == "admin" %}
            <div class="col-lg-6 shadow p-3">
               <h2 class="text-center p-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
                     <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
                  </svg>
                  User
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
                     <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
                  </svg>
               </h2>
               <hr>
               <table class="table table-bordered">
                  <thead>
                     <tr class="table-danger">
                        <th scope="col">ID</th>
                        <th scope="col">Username</th>
                        <th scope="col">Password</th>
                        <th scope="col">Roll</th>
                     </tr>
                  </thead>
                  <tbody>
                     {% for employee in employees %}
                     <tr>
                        <th scope="row">{{ employee.id}}</th>
                        <td>{{ employee.username}}</td>
                        <td>{{ employee.password}}</td>
                        <td>{{ employee.roll}}</td>
                     </tr>
                     {% endfor %}
                  </tbody>
               </table>
            </div>
            {% endif %}
         </div>
      </div>
      <!-- content end -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/gh/habibmhamadi/multi-select-tag@2.0.1/dist/js/multi-select-tag.js"></script>
      <script>
         new MultiSelectTag('countries')  // id
      </script>
   </body>
</html>